<!-- admin/users.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Management - DecipherInfoSec.</title>
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom Styles -->
    <style>
        [x-cloak] { display: none !important; }
        .hero-gradient {
            background: linear-gradient(90deg, #0c4a6e 0%, #0ea5e9 100%);
        }
    </style>
    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                            950: '#082f49',
                        },
                        secondary: {
                            50: '#f5f3ff',
                            100: '#ede9fe',
                            200: '#ddd6fe',
                            300: '#c4b5fd',
                            400: '#a78bfa',
                            500: '#8b5cf6',
                            600: '#7c3aed',
                            700: '#6d28d9',
                            800: '#5b21b6',
                            900: '#4c1d95',
                            950: '#2e1065',
                        },
                    }
                }
            }
        }
    </script>
</head>
<body class="min-h-screen flex flex-col bg-gray-50">
<!-- Header -->
<header class="bg-white shadow-md">
    <div class="container mx-auto px-4 py-3 flex items-center justify-between">
        <!-- Logo and Brand -->
        <div class="flex items-center space-x-2">
            <img src="../assets/images/logo.jpg" alt="DecipherInfoSec. Logo" width="150" height="20">
            <span class="text-2xl font-bold text-primary-700">DecipherInfoSec.</span>
        </div>

        <!-- Main Navigation -->
        <nav class="hidden md:flex space-x-6">
            <a href="../index.html" class="text-gray-700 hover:text-primary-600 font-medium">Home</a>
            <a href="../pages/about.html" class="text-gray-700 hover:text-primary-600 font-medium">About Us</a>
            <a href="/how-it-works" class="text-gray-700 hover:text-primary-600 font-medium">How It Works</a>
            <a href="/courses" class="text-gray-700 hover:text-primary-600 font-medium">Courses</a>
        </nav>

        <!-- User Actions -->
        <div class="flex items-center space-x-4">
            <div x-data="{ isOpen: false }" class="relative">
                <button @click="isOpen = !isOpen" class="flex items-center text-gray-700 hover:text-primary-600">
                    <span class="mr-1">Admin</span>
                    <i class="fas fa-user-shield text-primary-600"></i>
                </button>
                <div x-show="isOpen" @click.away="isOpen = false" x-transition class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50">
                    <a href="profile.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Profile</a>
                    <a href="settings.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Settings</a>
                    <div class="border-t border-gray-100"></div>
                    <a href="../index.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Logout</a>
                </div>
            </div>
        </div>

        <!-- Mobile Menu Button -->
        <button class="md:hidden text-gray-700" x-data="{ isOpen: false }" @click="isOpen = !isOpen">
            <i class="fas fa-bars text-xl"></i>
        </button>
    </div>

    <!-- Mobile Navigation -->
    <div class="md:hidden" x-data="{ isOpen: false }" x-show="isOpen" x-cloak>
        <div class="px-4 py-2 space-y-2">
            <a href="../index.html" class="block text-gray-700 hover:text-primary-600 font-medium py-2">Home</a>
            <a href="../pages/about.html" class="block text-gray-700 hover:text-primary-600 font-medium py-2">About Us</a>
            <a href="/how-it-works" class="block text-gray-700 hover:text-primary-600 font-medium py-2">How It Works</a>
            <a href="/courses" class="block text-gray-700 hover:text-primary-600 font-medium py-2">Courses</a>
        </div>
    </div>
</header>

<!-- Main Content -->
<div class="flex flex-col md:flex-row min-h-[calc(100vh-64px)]">
    <!-- Sidebar -->
    <aside class="w-full md:w-64 bg-primary-800 text-white p-4">
        <nav x-data="{ activeSection: 'users' }">
            <div class="space-y-2">
                <h3 class="text-xs uppercase tracking-wider text-primary-200 font-semibold mb-3">Main</h3>
                <a href="dashboard.html"
                   class="flex items-center px-4 py-2 rounded-lg transition-colors"
                   :class="activeSection === 'dashboard' ? 'bg-primary-700' : 'hover:bg-primary-700'"
                   @click="activeSection = 'dashboard'">
                    <i class="fas fa-tachometer-alt w-5 h-5 mr-3"></i>
                    <span>Dashboard</span>
                </a>
                <a href="users.html"
                   class="flex items-center px-4 py-2 rounded-lg transition-colors"
                   :class="activeSection === 'users' ? 'bg-primary-700' : 'hover:bg-primary-700'"
                   @click="activeSection = 'users'">
                    <i class="fas fa-users w-5 h-5 mr-3"></i>
                    <span>User Management</span>
                </a>
                <a href="instructors.html"
                   class="flex items-center px-4 py-2 rounded-lg transition-colors"
                   :class="activeSection === 'instructors' ? 'bg-primary-700' : 'hover:bg-primary-700'"
                   @click="activeSection = 'instructors'">
                    <i class="fas fa-chalkboard-teacher w-5 h-5 mr-3"></i>
                    <span>Instructors</span>
                </a>
                <a href="courses.html"
                   class="flex items-center px-4 py-2 rounded-lg transition-colors"
                   :class="activeSection === 'courses' ? 'bg-primary-700' : 'hover:bg-primary-700'"
                   @click="activeSection = 'courses'">
                    <i class="fas fa-book w-5 h-5 mr-3"></i>
                    <span>Courses</span>
                </a>
                <a href="enrollments.html"
                   class="flex items-center px-4 py-2 rounded-lg transition-colors"
                   :class="activeSection === 'enrollments' ? 'bg-primary-700' : 'hover:bg-primary-700'"
                   @click="activeSection = 'enrollments'">
                    <i class="fas fa-user-graduate w-5 h-5 mr-3"></i>
                    <span>Enrollments</span>
                </a>
                <h3 class="text-xs uppercase tracking-wider text-primary-200 font-semibold mt-6 mb-3">Learning</h3>
                <a href="assessments.html"
                   class="flex items-center px-4 py-2 rounded-lg transition-colors"
                   :class="activeSection === 'assessments' ? 'bg-primary-700' : 'hover:bg-primary-700'"
                   @click="activeSection = 'assessments'">
                    <i class="fas fa-tasks w-5 h-5 mr-3"></i>
                    <span>Assessments</span>
                </a>
                <a href="forums.html"
                   class="flex items-center px-4 py-2 rounded-lg transition-colors"
                   :class="activeSection === 'forums' ? 'bg-primary-700' : 'hover:bg-primary-700'"
                   @click="activeSection = 'forums'">
                    <i class="fas fa-comments w-5 h-5 mr-3"></i>
                    <span>Forums</span>
                </a>
                <h3 class="text-xs uppercase tracking-wider text-primary-200 font-semibold mt-6 mb-3">System</h3>
                <a href="reports.html"
                   class="flex items-center px-4 py-2 rounded-lg transition-colors"
                   :class="activeSection === 'reports' ? 'bg-primary-700' : 'hover:bg-primary-700'"
                   @click="activeSection = 'reports'">
                    <i class="fas fa-chart-bar w-5 h-5 mr-3"></i>
                    <span>Reports</span>
                </a>
                <a href="settings.html"
                   class="flex items-center px-4 py-2 rounded-lg transition-colors"
                   :class="activeSection === 'settings' ? 'bg-primary-700' : 'hover:bg-primary-700'"
                   @click="activeSection = 'settings'">
                    <i class="fas fa-cog w-5 h-5 mr-3"></i>
                    <span>Settings</span>
                </a>
            </div>
        </nav>
    </aside>

    <!-- Main Content Area -->
    <main class="flex-1 p-6" x-data="userManagement()">
        <div class="flex justify-between items-center mb-6">
            <div>
                <h1 class="text-2xl font-bold text-gray-800">User Management</h1>
                <p class="text-gray-600">Manage all users in the system</p>
            </div>
            <button @click="openAddUserModal" class="inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg">
                <i class="fas fa-user-plus mr-2"></i> Add New User
            </button>
        </div>

        <!-- Search and Filter Bar -->
        <div class="bg-white rounded-lg shadow mb-6 p-4">
            <div class="flex flex-col md:flex-row md:items-center space-y-3 md:space-y-0 md:space-x-4">
                <div class="flex-1">
                    <label for="search" class="sr-only">Search Users</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-search text-gray-400"></i>
                        </div>
                        <input type="text" id="search" x-model="filters.search"
                               class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500"
                               placeholder="Search users by name or email...">
                    </div>
                </div>
                <div class="flex space-x-2">
                    <select x-model="filters.role"
                            class="block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                        <option value="all">All Roles</option>
                        <option value="admin">Admin</option>
                        <option value="instructor">Instructor</option>
                        <option value="student">Student</option>
                    </select>
                    <select x-model="filters.status"
                            class="block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                        <option value="all">All Status</option>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- User List -->
        <div class="bg-white rounded-lg shadow overflow-hidden">
            <div class="flex justify-between items-center px-6 py-4 border-b border-gray-200">
                <h3 class="text-lg font-semibold text-gray-800">All Users</h3>
                <span class="text-sm text-gray-600" x-text="`${filteredUsers.length} users`"></span>
            </div>
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">User</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Role</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Joined</th>
                        <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                    </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                    <template x-for="user in filteredUsers" :key="user.id">
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="flex items-center">
                                    <div class="flex-shrink-0 h-10 w-10">
                                        <div class="h-10 w-10 rounded-full bg-primary-200 flex items-center justify-center text-primary-700 font-bold">
                                            <span x-text="user.first_name.charAt(0) + user.last_name.charAt(0)"></span>
                                        </div>
                                    </div>
                                    <div class="ml-4">
                                        <div class="text-sm font-medium text-gray-900" x-text="user.first_name + ' ' + user.last_name"></div>
                                        <div class="text-sm text-gray-500" x-text="user.email"></div>
                                    </div>
                                </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full"
                                              :class="{
                                                'bg-primary-100 text-primary-800': user.role === 'student',
                                                'bg-secondary-100 text-secondary-800': user.role === 'instructor',
                                                'bg-red-100 text-red-800': user.role === 'admin'
                                              }"
                                              x-text="user.role">
                                        </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full"
                                              :class="{
                                                'bg-green-100 text-green-800': user.is_active,
                                                'bg-gray-100 text-gray-800': !user.is_active
                                              }"
                                              x-text="user.is_active ? 'Active' : 'Inactive'">
                                        </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" x-text="formatDate(user.created_at)"></td>
                            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                <div class="flex justify-end space-x-2">
                                    <button @click="editUser(user)" class="text-primary-600 hover:text-primary-900" title="Edit">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button @click="toggleUserStatus(user)" class="text-yellow-600 hover:text-yellow-900" :title="user.is_active ? 'Deactivate' : 'Activate'">
                                        <i :class="user.is_active ? 'fas fa-ban' : 'fas fa-check'"></i>
                                    </button>
                                    <button @click="confirmDelete(user)" class="text-red-600 hover:text-red-900" title="Delete">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </template>
                    <tr x-show="filteredUsers.length === 0">
                        <td colspan="5" class="px-6 py-4 text-center text-gray-500">
                            No users found matching your criteria.
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Add/Edit User Modal -->
        <div x-show="showUserModal"
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0"
             x-transition:enter-end="opacity-100"
             x-transition:leave="transition ease-in duration-200"
             x-transition:leave-start="opacity-100"
             x-transition:leave-end="opacity-0"
             class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"
             x-cloak>
            <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4">
                <div class="p-6">
                    <h3 class="text-xl font-bold text-gray-900 mb-4" x-text="editingUser ? 'Edit User' : 'Add New User'"></h3>
                    <form @submit.prevent="saveUser">
                        <div class="space-y-4">
                            <!-- First Name -->
                            <div>
                                <label for="first_name" class="block text-sm font-medium text-gray-700">First Name</label>
                                <input type="text" id="first_name" x-model="userForm.first_name" required
                                       class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                            </div>

                            <!-- Last Name -->
                            <div>
                                <label for="last_name" class="block text-sm font-medium text-gray-700">Last Name</label>
                                <input type="text" id="last_name" x-model="userForm.last_name" required
                                       class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                            </div>

                            <!-- Email -->
                            <div>
                                <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                                <input type="email" id="email" x-model="userForm.email" required
                                       class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                            </div>

                            <!-- Password (only for new users) -->
                            <div x-show="!editingUser">
                                <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
                                <input type="password" id="password" x-model="userForm.password" :required="!editingUser"
                                       class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                            </div>

                            <!-- Role -->
                            <div>
                                <label for="role" class="block text-sm font-medium text-gray-700">Role</label>
                                <select id="role" x-model="userForm.role" required
                                        class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                    <option value="admin">Admin</option>
                                    <option value="instructor">Instructor</option>
                                    <option value="student">Student</option>
                                </select>
                            </div>

                            <!-- Status -->
                            <div>
                                <label for="is_active" class="block text-sm font-medium text-gray-700">Status</label>
                                <select id="is_active" x-model="userForm.is_active" required
                                        class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                    <option :value="true">Active</option>
                                    <option :value="false">Inactive</option>
                                </select>
                            </div>
                        </div>

                        <div class="mt-6 flex justify-end space-x-3">
                            <button type="button" @click="showUserModal = false" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg">
                                Cancel
                            </button>
                            <button type="submit" class="px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg">
                                Save
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Delete Confirmation Modal -->
        <div x-show="showDeleteModal"
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0"
             x-transition:enter-end="opacity-100"
             x-transition:leave="transition ease-in duration-200"
             x-transition:leave-start="opacity-100"
             x-transition:leave-end="opacity-0"
             class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"
             x-cloak>
            <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4">
                <div class="p-6">
                    <h3 class="text-xl font-bold text-gray-900 mb-4">Confirm Deletion</h3>
                    <p class="text-gray-700">Are you sure you want to delete <span class="font-semibold" x-text="userToDelete ? `${userToDelete.first_name} ${userToDelete.last_name}` : ''"></span>? This action cannot be undone.</p>
                    <p class="text-sm text-gray-500 mt-2">All associated data will be permanently deleted.</p>
                </div>
                <div class="bg-gray-50 px-6 py-4 flex justify-end space-x-3 rounded-b-lg">
                    <button @click="showDeleteModal = false" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg">
                        Cancel
                    </button>
                    <button @click="deleteUser" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg">
                        Delete
                    </button>
                </div>
            </div>
        </div>
    </main>
</div>

<!-- Footer -->
<footer class="bg-primary-900 text-white py-8">
    <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
                <h3 class="text-xl font-bold mb-4">DecipherInfoSec.</h3>
                <p class="text-primary-200">Accelerate your cybersecurity career with our specialized courses and certifications.</p>
            </div>
            <div>
                <h4 class="text-lg font-semibold mb-4">Quick Links</h4>
                <ul class="space-y-2">
                    <li><a href="../index.html" class="text-primary-200 hover:text-white">Home</a></li>
                    <li><a href="../pages/about.html" class="text-primary-200 hover:text-white">About Us</a></li>
                    <li><a href="/courses" class="text-primary-200 hover:text-white">Courses</a></li>
                    <li><a href="/contact" class="text-primary-200 hover:text-white">Contact</a></li>
                </ul>
            </div>
            <div>
                <h4 class="text-lg font-semibold mb-4">Legal</h4>
                <ul class="space-y-2">
                    <li><a href="/terms" class="text-primary-200 hover:text-white">Terms of Service</a></li>
                    <li><a href="/privacy" class="text-primary-200 hover:text-white">Privacy Policy</a></li>
                    <li><a href="/cookie-policy" class="text-primary-200 hover:text-white">Cookie Policy</a></li>
                </ul>
            </div>
            <div>
                <h4 class="text-lg font-semibold mb-4">Connect With Us</h4>
                <div class="flex space-x-4">
                    <a href="#" class="text-primary-200 hover:text-white">
                        <i class="fab fa-facebook-f text-xl"></i>
                    </a>
                    <a href="#" class="text-primary-200 hover:text-white">
                        <i class="fab fa-twitter text-xl"></i>
                    </a>
                    <a href="#" class="text-primary-200 hover:text-white">
                        <i class="fab fa-linkedin-in text-xl"></i>
                    </a>
                    <a href="#" class="text-primary-200 hover:text-white">
                        <i class="fab fa-youtube text-xl"></i>
                    </a>
                </div>
            </div>
        </div>
        <div class="border-t border-primary-800 mt-8 pt-6 text-center text-primary-300">
            <p>&copy; 2023 DecipherInfoSec. All rights reserved.</p>
        </div>
    </div>
</footer>

<!-- Alpine.js Data and Functions -->
<script>
    function userManagement() {
        return {
            users: [],
            filters: {
                search: '',
                role: 'all',
                status: 'all'
            },
            showUserModal: false,
            showDeleteModal: false,
            editingUser: null,
            userToDelete: null,
            userForm: {
                first_name: '',
                last_name: '',
                email: '',
                password: '',
                role: 'student',
                is_active: true
            },
            get filteredUsers() {
                return this.users.filter(user => {
                    const fullName = `${user.first_name} ${user.last_name}`.toLowerCase();
                    const email = user.email.toLowerCase();
                    const searchTerm = this.filters.search.toLowerCase();

                    const matchesSearch = this.filters.search === '' ||
                        fullName.includes(searchTerm) ||
                        email.includes(searchTerm);

                    const matchesRole = this.filters.role === 'all' ||
                        user.role === this.filters.role;

                    const matchesStatus = this.filters.status === 'all' ||
                        (this.filters.status === 'active' && user.is_active) ||
                        (this.filters.status === 'inactive' && !user.is_active);

                    return matchesSearch && matchesRole && matchesStatus;
                });
            },
            init() {
                this.fetchUsers();
            },
            async fetchUsers() {
                try {
                    // In a real application, this would be an API call to /api/v1/users/
                    // For demo purposes, we're setting mock data
                    setTimeout(() => {
                        this.users = [
                            {
                                id: 1,
                                first_name: 'John',
                                last_name: 'Doe',
                                email: 'john.doe@example.com',
                                role: 'student',
                                is_active: true,
                                created_at: '2023-01-15T14:30:00Z'
                            },
                            {
                                id: 2,
                                first_name: 'Jane',
                                last_name: 'Smith',
                                email: 'jane.smith@example.com',
                                role: 'instructor',
                                is_active: true,
                                created_at: '2023-02-20T10:15:00Z'
                            },
                            {
                                id: 3,
                                first_name: 'Robert',
                                last_name: 'Johnson',
                                email: 'robert.j@example.com',
                                role: 'student',
                                is_active: true,
                                created_at: '2023-03-05T09:45:00Z'
                            },
                            {
                                id: 4,
                                first_name: 'Michael',
                                last_name: 'Brown',
                                email: 'michael.b@example.com',
                                role: 'admin',
                                is_active: true,
                                created_at: '2023-03-10T16:20:00Z'
                            },
                            {
                                id: 5,
                                first_name: 'Alice',
                                last_name: 'Williams',
                                email: 'alice.w@example.com',
                                role: 'student',
                                is_active: false,
                                created_at: '2023-04-02T11:10:00Z'
                            },
                            {
                                id: 6,
                                first_name: 'Emily',
                                last_name: 'Davis',
                                email: 'emily.d@example.com',
                                role: 'instructor',
                                is_active: true,
                                created_at: '2023-04-15T08:30:00Z'
                            },
                            {
                                id: 7,
                                first_name: 'Daniel',
                                last_name: 'Wilson',
                                email: 'daniel.w@example.com',
                                role: 'student',
                                is_active: true,
                                created_at: '2023-04-25T14:45:00Z'
                            }
                        ];
                    }, 500);
                } catch (error) {
                    console.error('Error fetching users:', error);
                }
            },
            formatDate(dateString) {
                const options = { year: 'numeric', month: 'short', day: 'numeric' };
                return new Date(dateString).toLocaleDateString(undefined, options);
            },
            openAddUserModal() {
                this.editingUser = null;
                this.userForm = {
                    first_name: '',
                    last_name: '',
                    email: '',
                    password: '',
                    role: 'student',
                    is_active: true
                };
                this.showUserModal = true;
            },
            editUser(user) {
                this.editingUser = user;
                this.userForm = {
                    first_name: user.first_name,
                    last_name: user.last_name,
                    email: user.email,
                    password: '',
                    role: user.role,
                    is_active: user.is_active
                };
                this.showUserModal = true;
            },
            async saveUser() {
                try {
                    if (this.editingUser) {
                        // In a real application, this would make an API call to update the user
                        // PUT /api/v1/users/{this.editingUser.id} with updated data

                        // Update local array for UI update
                        const index = this.users.findIndex(u => u.id === this.editingUser.id);
                        if (index !== -1) {
                            this.users[index] = {
                                ...this.editingUser,
                                first_name: this.userForm.first_name,
                                last_name: this.userForm.last_name,
                                email: this.userForm.email,
                                role: this.userForm.role,
                                is_active: this.userForm.is_active
                            };
                        }
                    } else {
                        // In a real application, this would make an API call to create a new user
                        // POST /api/v1/users/register with new user data

                        // Add to local array for UI update
                        const newUser = {
                            id: this.users.length + 1,
                            first_name: this.userForm.first_name,
                            last_name: this.userForm.last_name,
                            email: this.userForm.email,
                            role: this.userForm.role,
                            is_active: this.userForm.is_active,
                            created_at: new Date().toISOString()
                        };
                        this.users.push(newUser);
                    }

                    this.showUserModal = false;
                } catch (error) {
                    console.error('Error saving user:', error);
                }
            },
            toggleUserStatus(user) {
                // In a real application, this would make an API call to update the user
                // PUT /api/v1/users/{user.id} with updated status
                user.is_active = !user.is_active;
            },
            confirmDelete(user) {
                this.userToDelete = user;
                this.showDeleteModal = true;
            },
            async deleteUser() {
                try {
                    // In a real application, this would make an API call to delete the user
                    // DELETE /api/v1/users/{this.userToDelete.id}

                    // Remove from local array for UI update
                    this.users = this.users.filter(u => u.id !== this.userToDelete.id);
                    this.showDeleteModal = false;
                    this.userToDelete = null;
                } catch (error) {
                    console.error('Error deleting user:', error);
                }
            }
        }
    }
</script>
</body>
</html>